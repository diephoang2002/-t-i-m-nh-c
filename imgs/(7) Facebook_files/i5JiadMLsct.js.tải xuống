if (self.CavalryLogger) { CavalryLogger.start_js(["if0d7"]); }

__d("useCometTailLoadGlimmerTracker",["IntersectionObserver","React","intersectionObserverEntryIsIntersecting","performanceNow","requireCond","cr:1703077"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a,c,d){var e=h.useRef(null),f=h.useRef(-1),i=h.useRef(-1),j=h.useRef(0),k=h.useRef(!1),l=h.useRef(null),m=h.useRef(null);b("cr:1703077")&&a!=null&&b("cr:1703077").setTailLoadStartTime(a,d);h.useEffect(function(){return function(){m.current&&m.current(),m.current=null}},[]);return h.useCallback(function(d){if(a!=null&&b("cr:1703077")&&d&&(f.current!==c||e.current!==d)){e.current=d;m.current&&(m.current(),m.current=null);if(k.current){var h=l.current;h!=null&&(j.current+=(g||(g=b("performanceNow")))()-h);l.current=(g||(g=b("performanceNow")))();k.current=!1}f.current!==c&&(j.current>0&&(b("cr:1703077").reportInterruptedConsumption(a,f.current,j.current),i.current=f.current),f.current=c,j.current=0);h=function(a){Array.prototype.forEach.call(a,function(a){if(b("intersectionObserverEntryIsIntersecting")(a)&&!k.current)k.current=!0,l.current=a.time;else if(!b("intersectionObserverEntryIsIntersecting")(a)&&k.current){k.current=!1;var c=l.current;c!=null&&(j.current+=a.time-c)}})};var n=new(b("IntersectionObserver"))(h);n.observe(d);m.current=function(){n.disconnect()}}},[a,c])}}),null);
__d("CometInfiniteScrollSuspenseList.react",["CometPagelet.react","CometPlaceholder.react","CometSuspenseList.react","JSTracing","React","gkx","mergeRefs","performanceNow","requireCond","useCometTailLoadGlimmerTracker","useLayoutEffect_SAFE_FOR_SSR","useSuspenseTransition","useVisibilityObserver","cr:1142206","stylex"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=b("React"),j={glimmerRoot:{overflowAnchor:"rek2kq2y"}};function k(a){var c=a.onLoadMore,d=a.rootMargin;a=a.triggerXStyle;var e=i.useRef(!1),f=i.useCallback(function(){b("cr:1142206")!=null&&b("cr:1142206").log("[onVisible] fired",{alreadyTriggered:e.current});if(e.current)return;e.current=!0;c()},[c]);d=b("useVisibilityObserver")({onVisible:f,options:{rootMargin:(f=d)!=null?f:0}});return i.jsx("div",{className:(g||(g=b("stylex")))(a),ref:d})}function a(a){var c=a.children,d=a.endGlimmerRef,e=a.hasMore,f=a.isLoading,l=a.listGlimmer,m=a.onLoadMore,n=a.pageletName,o=a.revealOrder,p=a.rootMargin;a=a.triggerXStyle;var q=i.useState(0),r=q[0],s=q[1],t=i.useRef(!1);q=b("useSuspenseTransition")();var u=q[0],v=i.useRef(null),w=i.useRef(0),x=e,y=i.useCallback(function(){w.current=(h||(h=b("performanceNow")))(),u(function(){b("JSTracing").clear(function(){s(function(a){return a+1}),m(v)})})},[m,u,v]);i.useEffect(function(){if(b("gkx")("1475760"))return;b("cr:1142206")!=null&&b("cr:1142206").log("[useEffect]","checking if we need to load more",{hasMore:e,isGlimmerVisible:t.current,isLoading:f});e&&!f&&t.current&&(b("cr:1142206")!=null&&b("cr:1142206").log("[useEffect]","Need to load more -- calling prioritizeOnLoadMore"),y())},[y,f,e,x]);b("useLayoutEffect_SAFE_FOR_SSR")(function(){x||(t.current=!1)},[x]);q=i.useCallback(function(){if(b("gkx")("1475760"))return;b("cr:1142206")!=null&&b("cr:1142206").log("[onVisible] fired",{wasVisible:t.current});var a=t.current;t.current=!0;b("cr:1142206")!=null&&b("cr:1142206").log("[onVisible]","checking if we need to load more",{hasMore:e,isLoading:f,wasVisible:a});!a&&e&&!f&&(b("cr:1142206")!=null&&b("cr:1142206").log("[onVisible]","calling prioritizedOnLoadMore"),y())},[e,f,y]);var z=i.useCallback(function(){if(b("gkx")("1475760"))return;b("cr:1142206")!=null&&b("cr:1142206").log("[onHidden]","marking glimmer refs as hidden",{wasVisible:t.current});t.current=!1},[]),A=b("useVisibilityObserver")({onHidden:z,onVisible:q,options:{rootMargin:(z=p)!=null?z:0}}),B=0;q=i.Children.map(c,function(a){return a?n!=null?i.jsx(b("CometPagelet.react").Placeholder,{fallback:l,name:n,position:B++,trackTailLoad:!0,children:a}):i.jsx(b("CometPlaceholder.react"),{fallback:l,children:a}):null});z=i.useState(!1);c=z[0];var C=z[1];i.useEffect(function(){return C(!0)},[]);if(b("gkx")("1475760")&&(e&&!f&&c)){z=i.jsx(k,{onLoadMore:y,rootMargin:p,triggerXStyle:a},"tailTrigger"+r);o==="backwards"?q.unshift(z):q.push(z)}c=B;var D=b("useCometTailLoadGlimmerTracker")(n,c,w.current);p=i.useMemo(function(){return b("mergeRefs")(d,v,D,A)},[d,D,A]);return i.jsxs(i.Fragment,{children:[x&&o==="backwards"?i.jsx("div",{ref:p,children:l},"glimmerBackwards"):null,i.jsx(b("CometSuspenseList.react"),{revealOrder:o||"forwards",tail:"hidden",children:q},"list"),x&&o!=="backwards"?i.jsx("div",{className:(g||(g=b("stylex")))(b("gkx")("1386096")&&j.glimmerRoot),ref:p,children:l},"glimmer"):null]})}}),null);
__d("CometInfiniteScrollSuspenseListIncrementalRenderer.react",["CometInfiniteScrollSuspenseList.react","React","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React"),h=[1,2,2,2,4];function a(a){var c=a.children,d=a.hasMore,e=a.isLoading,f=a.onLoadMore,i=a.revealOrder;i=i===void 0?"forwards":i;var j=a.pageSizes,k=j===void 0?h:j;j=babelHelpers.objectWithoutPropertiesLoose(a,["children","hasMore","isLoading","onLoadMore","revealOrder","pageSizes"]);a=g.useState(k[0]);var l=a[0],m=a[1],n=g.useRef(1),o=g.Children.count(c);a=l<o;if(i!=="forwards")throw b("unrecoverableViolation")('CometInfiniteScrollSuspenseListIncrementalRenderer currently only supports revealOrder="forwards"',"comet_feed");var p=g.useCallback(function(a){n.current=Math.min(n.current,k.length-1);var b=k[n.current];l<o?(n.current++,m(l+b)):d&&!e&&(l===o&&(n.current++,m(l+b)),f(a))},[d,e,o,l,f,k]),q=g.useMemo(function(){return g.Children.toArray(c).slice(0,l)},[c,l]);return g.jsx(b("CometInfiniteScrollSuspenseList.react"),babelHelpers["extends"]({},j,{hasMore:d||a,isLoading:e&&!a,onLoadMore:p,revealOrder:i,children:q}))}}),null);
__d("CometFeedInfiniteScrollSuspenseList.react",["CometEventListener","CometFeedGlimmer.react","CometFeedTailLoadBufferHeight","CometInfiniteScrollSuspenseList.react","CometInteractionSourceContext","FBLogger","QuickPerformanceLogger","React","WebConnectionClassServerGuess","requireCond","useVisibilityObserver","cr:1603779"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.children,d=a.hasMore,e=a.incrementalRendering;e=e===void 0?!0:e;var f=a.incrementalRenderingPageSizes,h=a.interactionSource,i=a.isLoading,j=a.onLoadMore,k=a.revealOrder,l=a.waitOnScrollIntent;a=a.pageletName;var m=g.useState(!1),n=m[0],o=m[1];g.useEffect(function(){if(!n){var a=window.scrollY,c=b("CometEventListener").capture(window,"scroll",function(b){b.target===window.document&&window.scrollY!==a&&o(!0)});return function(){c.remove()}}},[n]);m=g.useMemo(function(){return{onVisible:function(){b("QuickPerformanceLogger").markEvent(655653,"collision_happened",7,{annotations:{bool:{had_demonstrated_scroll_intent:n},"int":{interaction_source:h}}})}}},[h,n]);m=b("useVisibilityObserver")(m);var p=g.useMemo(function(){var a;if(l===!0&&!n)return 0;var c;switch(b("WebConnectionClassServerGuess").connectionClass){case"UNKNOWN":case"EXCELLENT":default:c=b("CometFeedTailLoadBufferHeight").EXCELLENT;break;case"GOOD":c=b("CometFeedTailLoadBufferHeight").GOOD;break;case"MODERATE":c=b("CometFeedTailLoadBufferHeight").MODERATE;break;case"POOR":c=b("CometFeedTailLoadBufferHeight").POOR;break}c==null&&(b("FBLogger")("comet_feed").mustfix("Found no tail load buffer height value for the connection class `%s`. Falling back to 2500px.",b("WebConnectionClassServerGuess").connectionClass),c=2500);return a={},a[k==="backwards"?"top":"bottom"]=c,a},[k,n,l]);m={endGlimmerRef:m,hasMore:d,isLoading:i,listGlimmer:g.jsx(b("CometFeedGlimmer.react"),{}),onLoadMore:j,pageletName:a,revealOrder:k,rootMargin:p};if(b("cr:1603779")&&e&&(k==null||k==="forwards"))return g.jsx(b("CometInteractionSourceContext").Provider,{value:h,children:g.jsx(b("cr:1603779"),babelHelpers["extends"]({pageSizes:f},m,{children:c}))});else return g.jsx(b("CometInteractionSourceContext").Provider,{value:h,children:g.jsx(b("CometInfiniteScrollSuspenseList.react"),babelHelpers["extends"]({},m,{children:c}))})}}),null);
__d("CometTailLoadDebugger",[],(function(a,b,c,d,e,f){"use strict";f.dump=a;f.log=b;var g=[];function a(){return g}function b(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];g.push([new Date().toLocaleString()].concat(b))}}),null);
__d("useLogMarketplaceClick",["CometMarketplaceLogger","React","useCurrentMarketplaceSurface"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=b("useCurrentMarketplaceSurface")(),d=c.referralSurface,e=c.surface;return g.useCallback(function(c){if(a==null)return;b("CometMarketplaceLogger").logClick(a,e,d,c)},[a,e,d])}}),null);
__d("createUseMutation_DEPRECATED",["Promise","CometRelay","React"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a,c,d,e){return function(){var f=b("CometRelay").useRelayEnvironment();return g.useCallback(function(g,h,i){return new(b("Promise"))(function(j,k){return b("CometRelay").enqueueMutation(f,{mutation:a,onCompleted:function(a,b){b&&b.length?k(b):j(a)},onError:function(a){return k([a])},optimisticResponse:c?c(g,h,i):null,optimisticUpdater:d?d(g,h,i):null,updater:e?e(g,h,i):null,variables:babelHelpers["extends"]({input:g},h)})})},[f])}}}),null);